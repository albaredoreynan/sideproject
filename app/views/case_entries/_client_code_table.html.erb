<div class="span10">
  <div class="pull-left">
    <%= link_to "Create Entry",
              new_case_entry_path,
              :class => 'btn btn-primary' %>
  </div>
  <div class="pull-right">
    <%= link_to "Download as PDF <i class='icon-download-alt'></i>".html_safe, case_entries_path(params.merge(format: 'pdf')), :class => "btn btn-primary" %>
    <%= link_to "Backup in EXCEL File <i class='icon-download-alt'></i>".html_safe, case_entries_path(params.merge(format: 'xls')), :class => "btn btn-success" %>
  </div>

</div>
<br/>
<br/>              
<div class="span10">                        
  <table class="table table-striped" id="case_entries">
    <thead>
      <tr>
        <th width="10%" class="pretty"><center><%= sortable "entry", "Entry Date" %></center></th>
        <th width="13%"><center><%= sortable "file_matter_id", "File Ref. No."%></center></th>
        <th width="17%"><center>Client Code</center></th>
        <th width="21%"><center><%= sortable "case_title", "Client"%></center></th>
        <th width="8%"><center><%= sortable "lawyer_id", "Initial"%></center></th>
        <th width="10%"><center>Start Time</center></th>
        <th width="10%"><center>End Time</center></th>
        <th width="10%"><center>Action</center></th>
      </tr>
    </thead>
    <tbody>
      <% if @case_entries.blank? || @case_entries.nil? %>
        <td colspan=8><center><h4> No data to show. </h4></center></td>
      <% else %>
        <% @case_entries.each do |case_entry| %>
          <tr class="<%= case_entry.remove_from_billing == 'Yes' ? 'error' : '' %>">
            <td data-title=""><center><%= case_entry.entry_date %></center></td>
            <td data-title=""><center><%= case_entry.file_matter_id %></center></td>
            <% @client = Client.find(:all, :conditions => { :id => case_entry.client_id} ) %>
            <td><% @client.each do |x| %>
                  <%= x.cl_code_txt %>
                <% end %>
            </td>    
            <td><%#= case_entry.file_matter_case %><%= case_entry.case_title %></td>
            <% @lawyers_initial = Lawyer.where("id = ?", case_entry.lawyer_id) %>
            <td><center>
              <% @lawyers_initial.each do |initials| %>
                <%= initials.initials %>
              <% end %>
            </center></td>
            <td><center><%= case_entry.time_spent_from %></center></td>
            <td><center><%= case_entry.time_spent_to %></center></td>
            <td><center>
              <%# if params[:beginning_date].present? && params[:ending_date].present? || params[:file_matter_id].present? || params[:client].present? || params[:case_title].present? %>
                <a href="#<%= case_entry.id %>" role="button" class="btn btn-success btn-mini" data-toggle="modal">Edit</a>
              <%# else %>
                <%#= link_to t('.edit', :default => t("helpers.links.edit")),
                          edit_case_entry_path(case_entry), :class => 'btn btn-mini' %>
                <!-- <a href="#<%= case_entry.id %>" role="button" class="btn btn-success btn-mini" data-toggle="modal">Edit</a> -->
              <%# end %>

              <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                          case_entry_path(case_entry),
                          :method => :delete,
                          :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                          :class => 'btn btn-mini btn-danger' %>
              </center>
            </td>
          </tr>
        <% end %>
      <% end %>

    </tbody>
  </table>
  <div class="pull-right">
    <% if @case_entries.blank? || @case_entries.nil? %>
      
    <% else %>
      <%= will_paginate @case_entry, :param_name => 'page', previous_label: "<i class='icon-chevron-left'></i>".html_safe, next_label: "<i class='icon-chevron-right'></i>".html_safe %>
    <% end %>
  </div>
</div>
